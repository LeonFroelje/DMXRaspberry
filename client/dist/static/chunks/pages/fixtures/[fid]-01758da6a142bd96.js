(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[370],{1687:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(4938)),o=n(5893),a=(0,i.default)((0,o.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");t.Z=a},8579:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fixtures/[fid]",function(){return n(7006)}])},7006:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(5893),i=n(1536),o=n(2293),a=n(5861),s=n(155),c=n(3946),u=n(6242),l=n(8445),d=n(7462),p=n(3366),f=n(7294),v=n(6010),h=n(4780),g=n(948),m=n(1657),y=n(1588),j=n(4867);function O(e){return(0,j.Z)("MuiCardContent",e)}(0,y.Z)("MuiCardContent",["root"]);let x=["className","component"],b=e=>{let{classes:t}=e;return(0,h.Z)({root:["root"]},O,t)},_=(0,g.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),S=f.forwardRef(function(e,t){let n=(0,m.Z)({props:e,name:"MuiCardContent"}),{className:i,component:o="div"}=n,a=(0,p.Z)(n,x),s=(0,d.Z)({},n,{component:o}),c=b(s);return(0,r.jsx)(_,(0,d.Z)({as:o,className:(0,v.Z)(c.root,i),ownerState:s,ref:t},a))});var Z=n(7357),w=n(6178),C=n(1519),E=n(1163),M=n(5441),P=n(6613),k=n(1687),N=n(7676);function T(){var e;let t=(0,E.useRouter)(),{fid:n}=t.query,d=(0,P.Z)(),p=(0,N.ZP)("ws://localhost:4000/api/ws",{share:!0}),f=null===(e=d.fixtures)||void 0===e?void 0:e.find(e=>e.id==n);return(0,r.jsxs)(i.Z,{sx:{width:"100%",minHeight:"100%"},rowGap:"1rem",children:[(0,r.jsxs)(o.Z,{component:"nav",sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"0rem 0.5rem",opacity:"90%"},position:"sticky",children:[(0,r.jsx)(a.Z,{variant:"h5",component:"div",children:null==f?void 0:f.name}),(0,r.jsx)(s.Z,{children:(0,r.jsx)(c.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{},children:(0,r.jsx)(M.Z,{})})})]}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(l.Z,{titleTypographyProps:{fontWeight:"500",fontSize:"1rem",lineHeight:"1"},title:"Szenen",action:(0,r.jsx)(c.Z,{children:(0,r.jsx)(k.Z,{})})}),(0,r.jsx)(S,{children:"TODO: Szenen f\xfcr einzelne Lampen bzw. Gruppen von Lampen einrichten"})]}),(0,r.jsx)(i.Z,{direction:"row",gap:"2rem",height:"50vh",justifyContent:"space-between",padding:"0rem 1rem 6re 1rem",overflow:"auto",children:null==f?void 0:f.active_mode.map((e,t)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.Z,{direction:"column",alignItems:"center",children:[(0,r.jsx)(a.Z,{variant:"caption",children:e.address}),(0,r.jsx)(Z.Z,{height:"75%",marginBottom:"1rem",marginTop:"1rem",children:(0,r.jsx)(w.ZP,{sx:{'& input[type="range"]':{WebkitAppearance:"slider-vertical"}},id:t.toString(),orientation:"vertical",defaultValue:e.data,"aria-label":e.channel_type,valueLabelDisplay:"auto",onChangeCommitted:(e,n)=>{if(f){f.active_mode[t].data=n,d.updateFixture(f);let e={url:"/fixture/update",text:JSON.stringify(f)};try{p.sendJsonMessage(e)}catch(e){console.log("Kein Websocket")}}}})}),(0,r.jsx)(a.Z,{variant:"caption",children:e.channel_type})]},e.address),(0,r.jsx)(C.Z,{orientation:"vertical"})]}))})]})}},7676:function(e,t,n){"use strict";var r=n(1835);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return r.useWebSocket}}),n(6548),n(1581),n(9448),n(9885)},9448:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var o=n(7294),a=n(1835),s=n(1581);t.useEventSource=function(e,t,n){void 0===t&&(t=s.DEFAULT_EVENT_SOURCE_OPTIONS),void 0===n&&(n=!0);var c=t.withCredentials,u=t.events,l=r(r({},i(t,["withCredentials","events"])),{eventSourceOptions:{withCredentials:c}}),d=o.useRef(s.EMPTY_EVENT_HANDLERS);u&&(d.current=u);var p=a.useWebSocket(e,l,n),f=p.lastMessage,v=p.readyState,h=p.getWebSocket;return o.useEffect(function(){(null==f?void 0:f.type)&&Object.entries(d.current).forEach(function(e){var t=e[0],n=e[1];t===f.type&&n(f)})},[f]),{lastEvent:f,readyState:v,getEventSource:h}}},6548:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var i=n(7294),o=n(1835),a=n(1581),s={type:"empty",payload:null},c=function(e){if(!e||!e.data)return s;var t=e.data.match(/\[.*]/);if(!t)return s;var n=JSON.parse(t);return Array.isArray(n)&&n[1]?{type:n[0],payload:n[1]}:s};t.useSocketIO=function(e,t,n){void 0===t&&(t=a.DEFAULT_OPTIONS),void 0===n&&(n=!0);var s=i.useMemo(function(){return r(r({},t),{fromSocketIO:!0})},[]),u=o.useWebSocket(e,s,n),l=u.sendMessage,d=u.sendJsonMessage,p=u.lastMessage,f=u.readyState,v=u.getWebSocket,h=i.useMemo(function(){return c(p)},[p]);return{sendMessage:l,sendJsonMessage:d,lastMessage:h,lastJsonMessage:h,readyState:f,getWebSocket:v}}}},function(e){e.O(0,[976,523,774,888,179],function(){return e(e.s=8579)}),_N_E=e.O()}]);